{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useState([{text:\"Merhaba! Ben sağlık takviyesi danışmanınızım. Size nasıl yardımcı olabilirim? Lütfen şikayetlerinizi veya tıbbi raporunuzu paylaşın.\",isUser:false}]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[selectedImage,setSelectedImage]=useState(null);const fileInputRef=useRef(null);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);const handleImageUpload=event=>{const file=event.target.files[0];if(file){const reader=new FileReader();reader.onload=e=>{setSelectedImage(e.target.result);};reader.readAsDataURL(file);}};const handleSubmit=async e=>{e.preventDefault();if(!inputMessage&&!selectedImage)return;const newMessage={text:inputMessage,isUser:true};setMessages(prev=>[...prev,newMessage]);setInputMessage('');setIsLoading(true);try{const formData=new FormData();if(inputMessage)formData.append('message',inputMessage);if(selectedImage){formData.append('image',selectedImage.split(',')[1]);}const response=await fetch('/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(Object.fromEntries(formData))});const data=await response.json();setMessages(prev=>[...prev,{text:data.message,isUser:false}]);}catch(error){console.error('Error:',error);setMessages(prev=>[...prev,{text:'Üzgünüm, bir hata oluştu. Lütfen tekrar deneyin.',isUser:false}]);}finally{setIsLoading(false);setSelectedImage(null);}};return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Sa\\u011Fl\\u0131k Takviyesi Dan\\u0131\\u015Fman\\u0131\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.isUser?'user-message':'bot-message'),children:message.text},index)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-area\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},children:[/*#__PURE__*/_jsx(\"p\",{children:\"T\\u0131bbi raporunuzu y\\xFCklemek i\\xE7in t\\u0131klay\\u0131n veya s\\xFCr\\xFCkleyin\"}),/*#__PURE__*/_jsx(\"small\",{children:\"(Desteklenen formatlar: JPG, PNG)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImageUpload,accept:\"image/*\",style:{display:'none'}})]}),selectedImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedImage,alt:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedImage(null),children:\"Kald\\u0131r\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"input-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:\"Mesaj\\u0131n\\u0131z\\u0131 yaz\\u0131n...\",className:\"message-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"send-button\",disabled:isLoading,children:\"G\\xF6nder\"})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","App","messages","setMessages","text","isUser","inputMessage","setInputMessage","isLoading","setIsLoading","selectedImage","setSelectedImage","fileInputRef","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleImageUpload","event","file","target","files","reader","FileReader","onload","e","result","readAsDataURL","handleSubmit","preventDefault","newMessage","prev","formData","FormData","append","split","response","fetch","method","headers","body","JSON","stringify","Object","fromEntries","data","json","message","error","console","className","children","map","index","concat","ref","onClick","_fileInputRef$current","click","type","onChange","accept","style","display","src","alt","onSubmit","value","placeholder","disabled"],"sources":["D:/webSite/client/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [messages, setMessages] = useState([\r\n    { text: \"Merhaba! Ben sağlık takviyesi danışmanınızım. Size nasıl yardımcı olabilirim? Lütfen şikayetlerinizi veya tıbbi raporunuzu paylaşın.\", isUser: false }\r\n  ]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const fileInputRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleImageUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setSelectedImage(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!inputMessage && !selectedImage) return;\r\n\r\n    const newMessage = { text: inputMessage, isUser: true };\r\n    setMessages(prev => [...prev, newMessage]);\r\n    setInputMessage('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      if (inputMessage) formData.append('message', inputMessage);\r\n      if (selectedImage) {\r\n        formData.append('image', selectedImage.split(',')[1]);\r\n      }\r\n\r\n      const response = await fetch('/chat', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(Object.fromEntries(formData))\r\n      });\r\n\r\n      const data = await response.json();\r\n      setMessages(prev => [...prev, { text: data.message, isUser: false }]);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setMessages(prev => [...prev, { text: 'Üzgünüm, bir hata oluştu. Lütfen tekrar deneyin.', isUser: false }]);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setSelectedImage(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <div className=\"chat-container\">\r\n        <header className=\"chat-header\">\r\n          <h1>Sağlık Takviyesi Danışmanı</h1>\r\n        </header>\r\n\r\n        <div className=\"messages-container\">\r\n          {messages.map((message, index) => (\r\n            <div\r\n              key={index}\r\n              className={`message ${message.isUser ? 'user-message' : 'bot-message'}`}\r\n            >\r\n              {message.text}\r\n            </div>\r\n          ))}\r\n          {isLoading && (\r\n            <div className=\"loading-message\">\r\n              <div className=\"loading-spinner\"></div>\r\n            </div>\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <div className=\"upload-area\" onClick={() => fileInputRef.current?.click()}>\r\n          <p>Tıbbi raporunuzu yüklemek için tıklayın veya sürükleyin</p>\r\n          <small>(Desteklenen formatlar: JPG, PNG)</small>\r\n          <input\r\n            type=\"file\"\r\n            ref={fileInputRef}\r\n            onChange={handleImageUpload}\r\n            accept=\"image/*\"\r\n            style={{ display: 'none' }}\r\n          />\r\n        </div>\r\n\r\n        {selectedImage && (\r\n          <div className=\"image-preview\">\r\n            <img src={selectedImage} alt=\"Preview\" />\r\n            <button onClick={() => setSelectedImage(null)}>Kaldır</button>\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"input-form\">\r\n          <input\r\n            type=\"text\"\r\n            value={inputMessage}\r\n            onChange={(e) => setInputMessage(e.target.value)}\r\n            placeholder=\"Mesajınızı yazın...\"\r\n            className=\"message-input\"\r\n          />\r\n          <button type=\"submit\" className=\"send-button\" disabled={isLoading}>\r\n            Gönder\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}